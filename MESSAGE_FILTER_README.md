# üõ°Ô∏è –ê–≤—Ç–æ—Ñ–∏–ª—å—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏–π

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –º–∞—Ç, –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è, —Å–ø–∞–º –∏ —Å—Å—ã–ª–∫–∏.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π** - –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å –º–∞—Ç–æ–º
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–π** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ–± –æ—Å–∫–æ—Ä–±–∏—Ç–µ–ª—å–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Å—ã–ª–æ–∫** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∞–º –∏ —Ä–µ–∫–ª–∞–º—É
- **–ê–Ω—Ç–∏—Å–ø–∞–º –∑–∞—â–∏—Ç–∞** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Å–ø–∞–º-–ø–∞—Ç—Ç–µ—Ä–Ω—ã
- **–ü—Ä–æ—Å—Ç–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞** - —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö
- **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - –ª–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∏ —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

2. –§–∞–π–ª—ã —Ñ–∏–ª—å—Ç—Ä–∞ —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`filter_config.py`)

```python
FILTER_SETTINGS = {
    "max_messages_per_minute": 5,        # –ú–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É
    "filter_strictness": "medium"         # –£—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏
}
```

### –£—Ä–æ–≤–Ω–∏ —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏

- **`low`** - –º—è–≥–∫–∏–π —Ä–µ–∂–∏–º, –º–µ–Ω—å—à–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- **`medium`** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **`high`** - —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º, –±–æ–ª—å—à–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å–ª–æ–≤

```python
# –í filter_config.py

# –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω–æ–µ —Å–ª–æ–≤–æ
BAD_WORDS.add('–Ω–æ–≤–æ–µ_—Å–ª–æ–≤–æ')

# –î–æ–±–∞–≤–∏—Ç—å –æ—Å–∫–æ—Ä–±–∏—Ç–µ–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ
OFFENSIVE_WORDS.add('–Ω–æ–≤–æ–µ_–æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ')

# –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ-–∏—Å–∫–ª—é—á–µ–Ω–∏–µ
EXCEPTION_WORDS.add('–∏—Å–∫–ª—é—á–µ–Ω–∏–µ')
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í –∫–æ–¥–µ –±–æ—Ç–∞

```python
from message_filter import get_message_filter, FilterResult

# –ü–æ–ª—É—á–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä —Ñ–∏–ª—å—Ç—Ä–∞
message_filter = get_message_filter()

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
filter_result = message_filter.check_message(user_id, text, "text")

if filter_result.is_blocked:
    # –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏–µ
    await handle_filter_violation(message, filter_result)
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–π

–§–∏–ª—å—Ç—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `FilterResult` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏:

```python
@dataclass
class FilterResult:
    is_blocked: bool      # –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ
    reason: str           # –ü—Ä–∏—á–∏–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
    details: str          # –î–µ—Ç–∞–ª–∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è
    severity: str         # –£—Ä–æ–≤–µ–Ω—å —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏
```

### –£—Ä–æ–≤–Ω–∏ —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏

- **`block`** - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (–º–∞—Ç, —Å—Å—ã–ª–∫–∏, –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è, —Å–ø–∞–º)

## üìä –°–∏—Å—Ç–µ–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

–í—Å–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
- **–ú–∞—Ç** - —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- **–û—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è** - —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- **–°—Å—ã–ª–∫–∏** - —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- **–°–ø–∞–º** - —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

## üéØ –¢–∏–ø—ã –ø—Ä–æ–≤–µ—Ä–æ–∫

### 1. –ù–µ—Ü–µ–Ω–∑—É—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –º–∞—Ç–∞ (—Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ª–æ–≤–∞-–∏—Å–∫–ª—é—á–µ–Ω–∏—è

### 2. –û—Å–∫–æ—Ä–±–∏—Ç–µ–ª—å–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ

### 3. –°—Å—ã–ª–∫–∏ –∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç HTTP/HTTPS —Å—Å—ã–ª–∫–∏
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è (@username)
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç —Ö–µ—à—Ç–µ–≥–∏ (#tag)
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### 4. –°–ø–∞–º-–ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–∏–º–≤–æ–ª—ã (!!!!!)
- –í–°–ï –ó–ê–ì–õ–ê–í–ù–´–ï –ë–£–ö–í–´
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è
- –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- –ß–∞—Å—Ç–æ—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –í—Å–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä—É—é—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –§–∏–ª—å—Ç—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- –°–ª–æ–≤–∞ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ª–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è
- –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –¥–µ—Ç–∞–ª—è–º–∏:

```
WARNING: User 123456 received warning for offensive_words: –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—Å–∫–æ—Ä–±–∏—Ç–µ–ª—å–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è: –∏–¥–∏–æ—Ç, –¥–µ–±–∏–ª
WARNING: User 123456 message blocked for bad_words: –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –Ω–µ—Ü–µ–Ω–∑—É—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è: –±–ª—è—Ç—å, —Ö—É–π
WARNING: User 123456 auto-blocked for spam activity
```

## üõ†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

```python
# –í filter_config.py
SPAM_PATTERNS.append(r'–Ω–æ–≤—ã–π_–ø–∞—Ç—Ç–µ—Ä–Ω')
```

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```python
class MessageFilter:
    def _check_custom_pattern(self, text: str) -> FilterResult:
        # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
        pass
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

```python
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π –≤ –ë–î
async def save_violation(user_id: int, violation_type: str, details: str):
    # –õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    pass
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –§–∏–ª—å—Ç—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º–ø–æ—Ä—Ç—ã –≤ `bot.py`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `message_filter.py` –∏ `filter_config.py` –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

### –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
1. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–æ–≤–∞ –≤ `EXCEPTION_WORDS`
2. –£–º–µ–Ω—å—à–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏ –¥–æ `low`
3. –û—Ç–∫–ª—é—á–∏—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

### –§–∏–ª—å—Ç—Ä —Å–ª–∏—à–∫–æ–º –º—è–≥–∫–∏–π
1. –£–≤–µ–ª–∏—á—å—Ç–µ —É—Ä–æ–≤–µ–Ω—å —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏ –¥–æ `high`
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ —Å–ø–∏—Å–∫–∏
3. –£–º–µ–Ω—å—à–∏—Ç–µ –ª–∏–º–∏—Ç—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Python —Ñ–∞–π–ª–æ–≤

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞:
1. –û–±–Ω–æ–≤–∏—Ç–µ `message_filter.py` –∏ `filter_config.py`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
